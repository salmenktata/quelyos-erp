# =============================================================================
# Configuration Odoo Performance - Quelyos ERP
# =============================================================================
#
# Ce fichier contient les paramètres optimisés pour la performance.
# À utiliser avec: odoo-bin -c config/odoo-performance.conf
#
# =============================================================================

[options]
# =============================================================================
# DATABASE
# =============================================================================

# Pool de connexions
db_maxconn = 64
# Nombre maximum de connexions par worker

# Timeout connexion DB
db_timeout = 120

# =============================================================================
# WORKERS & PERFORMANCE
# =============================================================================

# Nombre de workers (règle: 2 * CPU + 1)
# Pour 4 CPU: workers = 9
workers = 4

# Mémoire max par worker (soft limit)
limit_memory_soft = 2147483648
# 2GB

# Mémoire max par worker (hard limit)
limit_memory_hard = 2684354560
# 2.5GB

# Temps CPU max par requête
limit_time_cpu = 120

# Temps réel max par requête
limit_time_real = 300

# Nombre max de requêtes avant recyclage du worker
limit_request = 8192

# =============================================================================
# CACHE
# =============================================================================

# Taille du cache ORM (en Ko)
osv_memory_age_limit = 1.0
osv_memory_count_limit = 0

# =============================================================================
# LOGGING
# =============================================================================

# Niveau de log
log_level = info

# Format de log (JSON pour parsing facile)
# log_handler = :INFO,werkzeug:WARNING,odoo.sql_db:WARNING

# =============================================================================
# SÉCURITÉ
# =============================================================================

# Liste des modules autorisés pour les opérations admin
server_wide_modules = base,web,quelyos_api

# Proxy mode (derrière nginx)
proxy_mode = True

# =============================================================================
# CRON
# =============================================================================

# Activer les jobs cron
# max_cron_threads = 2

# =============================================================================
# ASSETS
# =============================================================================

# Compresser les assets (CSS/JS)
# x_sendfile = True
