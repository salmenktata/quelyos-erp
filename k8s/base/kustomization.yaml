apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

namespace: quelyos

resources:
  # Namespace
  - namespace.yaml

  # Config & Secrets
  - configmaps/app-config.yaml
  - secrets/secrets.yaml

  # Storage
  - storage/postgres-pvc.yaml
  - storage/redis-pvc.yaml
  - storage/odoo-pvc.yaml

  # PostgreSQL
  - postgres/statefulset.yaml
  - postgres/service.yaml

  # Redis
  - redis/statefulset.yaml
  - redis/service.yaml

  # Backend API
  - odoo/deployment.yaml
  - odoo/service.yaml

  # Vitrine Quelyos (Marketing)
  - vitrine-quelyos/deployment.yaml
  - vitrine-quelyos/service.yaml
  - vitrine-quelyos/hpa.yaml

  # Vitrine Client (E-commerce)
  - vitrine-client/deployment.yaml
  - vitrine-client/service.yaml
  - vitrine-client/hpa.yaml

  # Dashboard Client (Backoffice)
  - dashboard-client/deployment.yaml
  - dashboard-client/service.yaml
  - dashboard-client/hpa.yaml

  # Ingress
  - ingress.yaml

commonLabels:
  app.kubernetes.io/name: quelyos
  app.kubernetes.io/part-of: quelyos-suite
